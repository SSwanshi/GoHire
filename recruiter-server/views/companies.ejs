<%- include('layout/header') %>

<% if (successMessage) { %>
    <div id="toast" class="fixed top-5 right-5 bg-green-500 text-white p-3 rounded-md shadow-md mt-20">
        <%= successMessage %>
    </div>
    <script>
        setTimeout(() => {
            document.getElementById("toast").style.display = "none";
        }, 3000);
    </script>
<% } %>

<h2 class="font-bold mt-10 flex justify-center font-sans text-xl">Here is your list of recently added Companies</h2>

<section class="my-10 flex justify-center mb-36">
    <div class="w-full max-w-4xl">
        <table class="w-full text-left border-collapse border border-gray-300">
            <thead>
                <tr class="text-gray-700 bg-gray-200">
                    <th class="px-6 py-3 border border-gray-300">Logo</th>
                    <th class="px-6 py-3 border border-gray-300">Name</th>
                    <th class="px-6 py-3 border border-gray-300">Website</th>
                    <th class="px-6 py-3 border border-gray-300">Location</th>
                    <th class="px-6 py-3 border border-gray-300 text-center">Action</th>
                </tr>
            </thead>
            <tbody>
                <% if (companies.length > 0) { %>
                    <% companies.forEach(company => { %>
                        <tr class="hover:bg-gray-100">
                            <td class="px-6 py-4 border border-gray-300">
                                <div class="company-card">
                                    <% if (company.logoId) { %>
                                        <img src="/recruiter/logo/<%= company.logoId %>" alt="<%= company.companyName %> Logo" class="h-10 w-10 rounded-full">
                                    <% } else { %>
                                        <p><%= company.companyName %></p>
                                    <% } %>
                                </div>
                            </td>
                            <td class="px-6 py-4 border border-gray-300"><%= company.companyName %></td>
                            <td class="px-6 py-4 border border-gray-300">
                                <a href="<%= company.website %>" class="text-blue-500 hover:underline" target="_blank">Visit</a>
                            </td>
                            <td class="px-6 py-4 border border-gray-300"><%= company.location %></td>
                            <td class="px-6 py-4 border border-gray-300 flex items-center gap-4 justify-center">
                                <form action="/recruiter/delete-company/<%= company._id %>" method="POST">
                                    <button type="submit" class="bg-red-500 hover:bg-red-800 text-white font-bold py-2 px-4 rounded">
                                        Delete
                                    </button>
                                </form>
                                <a href="/recruiter/edit-company/<%= company._id %>" 
                                    class="bg-green-500 hover:bg-green-800 text-white font-bold py-2 px-4 rounded inline-block text-center">
                                    Edit
                                 </a>
                                 
                            </td>
                        </tr>
                    <% }) %>
                <% } else { %>
                    <tr>
                        <td colspan="5" class="px-6 py-4 text-center text-gray-500">No companies added yet.</td>
                    </tr>
                <% } %>
                
            </tbody>
        </table>
    </div>
</section>

<%- include('layout/footer') %>
